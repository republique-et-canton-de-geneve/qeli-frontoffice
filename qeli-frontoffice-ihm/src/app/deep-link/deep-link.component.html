<!--
  ~ qeli-frontoffice
  ~
  ~ Copyright (C) 2019-2021 Republique et canton de Geneve
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="dropdown">
  <button class="btn btn-default dropdown-toggle copy-link-toggle"
          (click)="showCopyPanel = !showCopyPanel"
          type="button"
          title="{{ 'form.deepLink.copyLink' | translate }}"
          [attr.aria-label]="'form.deepLink.copyLink' | translate"
          [attr.id]="'deep-link-dropdown-btn-' + id"
          aria-haspopup="true"
          [attr.aria-expanded]="showCopyPanel">
    <i class="fa fa-floppy-o"></i>
    <span class="visible-xs-inline-block hidden-sm">{{ 'form.deepLink.copyLinkShort' | translate }}</span>
  </button>

  <div *ngIf="showCopyPanel === true"
       class="deep-link-pop-in dropdown-menu pull-right show"
       [attr.aria-labelledby]="'deep-link-dropdown-btn-' + id">

    <label class="help-block" [attr.for]="'deep-link-input-' + id">
      {{ 'form.deepLink.copyHelpText'| translate }}
    </label>

    <div class="input-group">
      <input class="deep-link-input form-control"
             type="text"
             [attr.id]="'deep-link-input-' + id"
             value="{{ deepLink }}"
             readonly
             #deepLinkInput>
      <div class="input-group-addon has-btn">
        <button class="btn btn-info"
                type="button"
                (click)="copy()"
                [attr.aria-label]="'form.deepLink.copyButton'| translate"
                title="{{ 'form.deepLink.copyButton'| translate }}">
          <i class="fa fa-copy"></i>
        </button>
      </div>
    </div>
  </div>
</div>
