<!--
  ~ qeli-frontoffice
  ~
  ~ Copyright (C) 2019-2021 Republique et canton de Geneve
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="form-result">
  <div class="row form-result-title">
    <div class="col-xs-12 col-sm-8">
      <h2>{{ 'home.result.title' | translate }}</h2>
    </div>
    <div class="visible-sm visible-md visible-lg col-sm-4 text-right" *ngIf="!disableDeepLink">
      <app-deep-link></app-deep-link>
    </div>
  </div>

  <div *ngIf="formResult.prestationsEligibles.length > 0">
    <h3>{{ 'home.result.eligibilite.oui' | translate }}</h3>
    <result-block *ngFor="let resultsByPrestation of formResult.prestationsEligibles"
                  type="eligible"
                  [resultsByPrestation]="resultsByPrestation"
                  [formData]="formData"
                  [attr.data-cy-prestations-eligibles]="resultsByPrestation.prestation">
    </result-block>
    <hr>
  </div>

  <div *ngIf="formResult.prestationsRefusees.length > 0">
    <h3>{{ 'home.result.eligibilite.non' | translate }}</h3>
    <result-block *ngFor="let resultsByPrestation of formResult.prestationsRefusees"
                  type="refusee"
                  [resultsByPrestation]="resultsByPrestation"
                  [formData]="formData"
                  [attr.data-cy-prestations-refusees]="resultsByPrestation.prestation">
    </result-block>
    <hr>
  </div>

  <div *ngIf="formResult.prestationsDejaPercues.length > 0">
    <h3>{{ 'home.result.eligibilite.deja' | translate }}</h3>
    <result-block *ngFor="let resultsByPrestation of formResult.prestationsDejaPercues"
                  type="dejaPercue"
                  [resultsByPrestation]="resultsByPrestation"
                  [formData]="formData"
                  [attr.data-cy-prestations-deja-percues]="resultsByPrestation.prestation">
    </result-block>
    <hr>
  </div>

  <div class="row form-result-action" *ngIf="canSavePDF">
    <print-pdf class="col-xs-12 col-md-offset-8 col-md-4 col-sm-offset-6 col-sm-6 text-right"
               [formData]="formData"
               [formResult]="formResult"
               [demandeur]="demandeur">
    </print-pdf>
  </div>
</div>
