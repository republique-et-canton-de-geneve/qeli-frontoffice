<!--
  ~ qeli-frontoffice
  ~
  ~ Copyright (C) 2019-2021 Republique et canton de Geneve
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>
  <label [attr.for]="identifier"
         [id]="identifier + '_label'"
         class="control-label"
         [ngClass]="!isValid ? 'text-danger' : ''">
    {{ label }} <span *ngIf="required" class="form-required" title="{{ 'form.required' | translate }}">*</span>
  </label>

  <div [ngClass]="!isValid ? 'text-danger' : ''">
    <ng-content></ng-content>
  </div>

  <div *ngIf="!isValid && errors.length > 0"
       class="error-block text-danger"
       data-cy="validation_message"
       role="alert"
       [attr.aria-describedby]="identifier + '_label'">
    <p *ngFor="let error of errors">
      {{ 'common.errorPrefix' | translate }}
      {{ errorLabels && errorLabels[error] ? (errorLabels[error].key | translate:errorLabels[error].parameters) : 'erreur inconnu' }}
    </p>
  </div>
</div>
